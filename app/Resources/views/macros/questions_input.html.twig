{% macro questions_input(parent_form) %}
  {% set question_name = parent_form.questions.vars.full_name ~ "[__question_id__]" %}
  {% set answer_name = question_name ~ "[answers][__answer_id__]" %}

  <ul class="questionsOld"
    >
    <input type="text"
      name="onsec_onsecbundle_instruction[questions][0][questionText]"/>
    <input type="text"
      name="onsec_onsecbundle_instruction[questions][0][imagePath]"/>
    <ul class="answers">
      <input type="text"
        name ="onsec_onsecbundle_instruction[questions][0][answers][0][answerText]"/>
      <input type="checkbox"
        name ="onsec_onsecbundle_instruction[questions][0][answers][0][isCorrect]"/>
    </ul>
  </ul>
  <a href="#" class="add_question">Frage hinzufügen</a>


  <h1>Fragen:</h1>
  <ul class="questions">
  </ul>

  <script>
  var $addLink = $('<a href="#" class="add_link">Frage hinzufügen</a>');
  var $newLinkLi = $('<li></li>').append($addLink);


  var questionName = "{{ question_name }}";
  var answerName = "{{ answer_name }}"

  var questionTemplate = `
    <div class="question">
      <div class="form-group">
        <label class="sr-only" for="{{ question_name }}">Frage</label>
        <input type="text" class="form-control mb-2 mr-sm-2 mb-sm-0" id="{{ question_name }}" placeholder="Wie lautet...">
      </div>

      <div class="answers">
      </div>
    </div>
  `

  var answerTemplate = `
    <div class="d-flex flex-row" style="display: flex; flex-direction: row;">
      <div style="width: 75%;">
        <label class="sr-only" for="{{ answer_name }}">Name</label>
        <input type="text" class="form-control mb-1 mr-sm-2 mb-sm-0" id="{{ answer_name }}" placeholder="Antwort 1">
      </div>

      <div class="form-check mb-2 mr-sm-2 mb-sm-0" style="width: 20%;">
        <label class="form-check-label">
          <input class="form-check-input" type="checkbox"> Korrekt
        </label>
      </div>
    </div>
  `


  jQuery(document).ready(function() {
    $('ul.questions').append($(questionTemplate)).append($(answerTemplate));
  });

  // jQuery(document).ready(function() {
  //   var questionKey = "{{ parent_form.questions.vars.full_name }}[__question_id__]";
  //   var answerSuffix = "[answers][__answer_id__]"

  //   $(div.)

  //   var $collectionHolder = $('ul.questions');
  //   $collectionHolder.append($newLinkLi);
  //   $collectionHolder.data('index', $collectionHolder.find(':input').length);

  //   $addLink.on('click', function(e) {
  //     e.preventDefault();
  //     addForm($collectionHolder, $newLinkLi);
  //   });

  // });

  // function addForm() {
  //   var prototype = $collectionHolder.data('prototype');
  //   var index = $collectionHolder.data('index');

  //   var newForm = prototype.replace(/__name__/g, index);

  //   $collectionHolder.data('index', index + 1);

  //   var $newFormLi = $('<li></li>').append(newForm);
  //   $newLinkLi.before($newFormLi);
  // }
  </script>
{% endmacro %}
